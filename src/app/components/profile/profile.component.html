<body>
    <app-sidebar></app-sidebar>
    <div class="content">
        <div class="profile-container">
            <div class="profile-header">
                <img [src]="picture"
                    alt="Profile Picture" class="profile-avatar">
                <div class="profile-info">
                    <h1>{{userDetails.username}}</h1>
                    <p>{{userDetails.role}}</p>
                    <p>{{userDetails.email}}</p>

                </div>
            </div>

            <div class="profile-content">
                <div class="profile-sidebar">
                    <div class="profile-card">
                        <h2>About</h2>
                        <div class="detail-row">
                            <span class="detail-label">Category:</span>
                            <span class="detail-value" *ngIf="userDetails.category!=null">{{userDetails.category}}</span>
                            <span class="detail-value" *ngIf="userDetails.category==null">not selected</span>
                        </div>
                    </div>
                </div>

                <div class="profile-main">
                    <div class="profile-card">
                        <h2>Account Details</h2>

                        <div class="detail-row">
                            <span class="detail-label">Email:</span>
                            <span class="detail-value">{{userDetails.email}}</span>
                            <button class="btn-edit" (click)="OpenEmailForm()">
                                Edit Email
                            </button>
                        </div>
                        <div *ngIf="openEmailForm == true">
                            <form [formGroup]="editEmailForm" (ngSubmit)="editEmail(userDetails.id)">
                                <input type="email" formControlName="email" />
                                <div *ngIf="email?.invalid && email?.touched">
                                    <small *ngIf="email?.errors?.['required']">Email is required.</small>
                                    <small *ngIf="email?.errors?.['email']">Invalid email format.</small>
                                </div>
                                <button type="submit" [disabled]="editEmailForm.invalid">Submit</button>
                            </form>
                            <button (click)="closeEmailForm()">
                                Cancel </button>
                        </div>



                        <div class="detail-row">
                            <span class="detail-label">Password:</span>
                            <span class="detail-value">••••••••</span>
                            <button class="btn-edit" (click)="OpenPasswordForm()">
                                Edit Password
                            </button>
                        </div>
                        <div *ngIf="openPasswordForm == true">
                            <form [formGroup]="editPasswordForm" (ngSubmit)="editPassword(userDetails.id)">
                                <input type="password" formControlName="password" />
                                <div *ngIf="password?.invalid && password?.touched">
                                    <small *ngIf="password?.errors?.['required']">Password is required.</small>
                                    <small *ngIf="password?.errors?.['minlength']">Password must be at least 6
                                        characters.</small>
                                </div>
                                <button type="submit" [disabled]="editPasswordForm.invalid">Submit</button>
                            </form>
                            <button (click)="closePasswordForm()">
                                Cancel
                            </button>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</body>