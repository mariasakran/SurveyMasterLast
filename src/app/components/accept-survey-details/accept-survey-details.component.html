<body>
  <div class="survey-container">
    <div class="nav-bar">
      <button class="btn-back" routerLink="/acceptsurvey">
        <i class="bi bi-arrow-left"></i>
        <span>Back to List</span>
      </button>
    </div>

    <div *ngIf="survey" class="survey-content">
      <section class="survey-header">
        <h1 class="survey-title">{{ survey.title }}</h1>
        <p class="survey-description">{{ survey.description || 'No description provided' }}</p>
      </section>

      <section class="survey-questions">
        <div *ngIf="survey.questions && survey.questions.length > 0">
          <div class="question-card">
            <h2>Q{{ currentIndex + 1 }}: {{ survey.questions[currentIndex].text }}</h2>

            <div *ngIf="survey.questions[currentIndex].answerOptions?.length > 0">
              <div *ngIf="survey.questions[currentIndex].questionType === 'checkbox'">
                <label *ngFor="let option of survey.questions[currentIndex].answerOptions" class="option-label">
                  <input type="checkbox" [id]="'checkbox-' + currentIndex + '-' + option.id" class="option-input">
                  {{ option.text }}
                </label>
              </div>

              <div *ngIf="survey.questions[currentIndex].questionType === 'radio'">
                <label *ngFor="let option of survey.questions[currentIndex].answerOptions" class="option-label">
                  <input type="radio" [name]="'radio-' + currentIndex" [id]="'radio-' + currentIndex + '-' + option.id"
                    class="option-input">
                  {{ option.text }}
                </label>
              </div>

              <ul
                *ngIf="survey.questions[currentIndex].questionType !== 'checkbox' && survey.questions[currentIndex].questionType !== 'radio'">
                <li *ngFor="let option of survey.questions[currentIndex].answerOptions" class="option-static">
                  {{ option.text }}
                </li>
              </ul>
            </div>

            <div *ngIf="survey.questions[currentIndex].questionType === 'text'">
              <textarea class="text-answer" placeholder="Your answer..."></textarea>
            </div>
          </div>

          <div class="d-flex justify-content-between mt-3">
            <button class="btn-action" (click)="prevQuestion()" [disabled]="currentIndex === 0">Previous</button>
            <button class="btn-action" (click)="nextQuestion()"
              [disabled]="currentIndex === survey.questions.length - 1">Next</button>
          </div>
        </div>
      </section>

      <section class="survey-message">
        <label for="message">Message (optional)</label>
        <textarea id="message" [(ngModel)]="message" class="text-answer" placeholder="Leave a message..."></textarea>
      </section>

      <section class="action-buttons">
        <button class="btn-action accept" (click)="acceptSurvey(survey.id, message)">Accept</button>
        <button class="btn-action decline" (click)="declineSurvey(survey.id, message)">Decline</button>
      </section>
    </div>
  </div>
</body>